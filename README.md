# API222
Final Project for HKS API222: Machine Learning and Big Data Analytics on National Security

## Local data files (not tracked by git)

- Place any `.xlsx` or other large/private data files in the `data/` directory at the project root.
- The `data/` directory is ignored by git via `.gitignore`, so files placed there will not be committed or pushed.

Example structure:

```
API222/
  data/
    terrorism_data.xlsx
    gtd_cleaned.csv  # generated by the cleaner, not tracked by git
  data_processor.py
  map_visualizer.py
  s3_data_loader.py
  terrorism_analysis.ipynb
```

Accessing the local file from code or notebooks (example path):

```python
local_path = "data/terrorism_data.xlsx"
# Load with your preferred library, e.g., pandas:
# import pandas as pd
# df = pd.read_excel(local_path)
```

## GTD cleaning script

The repository includes a modular GTD cleaner at `gtd_cleaner.py` that prepares the Global Terrorism Database for ML.

- What it does:
  - Cleans `nkill`, `nwound` (treats -99/missing as 0; outputs integers)
  - Ensures binary integers for `success`, `suicide`
  - Cleans `latitude`, `longitude` (sets -99/invalid to NaN), adds `geo_missing` flag; optional row drop
  - Removes duplicates by `eventid`
  - Drops columns with >50% missing values (keeps key columns)
  - One-hot encodes: `attacktype1_txt`, `weaptype1_txt`, `region_txt`, `country_txt`, `targtype1_txt`
  - Adds `severity = nkill + nwound`

- Input formats: CSV or Excel (`.xlsx`/`.xls`).

- Example usage (writes cleaned CSV into `data/`):

```bash
source .venv/bin/activate
python gtd_cleaner.py \
  "/path/to/globalterrorismdb.xlsx" \
  -o data/gtd_cleaned.csv --drop-missing-geo --drop-first
```

Note: The `data/` directory is ignored by git, so the generated `data/gtd_cleaned.csv` will not be committed.
